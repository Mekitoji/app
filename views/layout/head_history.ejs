<% var route = path.split('/')[1]%>

<link rel="stylesheet" href="../../../vendor/bootstrap/dist/css/bootstrap.min.css">
<link rel='stylesheet' href='../../../vendor/ng-grid/ng-grid.min.css'></script>

<!-- Jquery -->
<script src= "../../../vendor/jquery/dist/jquery.min.js"></script>
<script src= "../../../vendor/jquery/jquery-ui-1.11.1/jquery-ui.min.js"></script>
<link rel="stylesheet" href="../../../vendor/jquery/jquery-ui-1.11.1/jquery-ui.min.css">
<!-- plugin -->
<script src='../../../js/mindmup-editabletable.js'></script>
<!-- Bootstrap -->
<script src= "../../../vendor/bootstrap/dist/js/bootstrap.min.js"></script>

<!-- FullCalendar -->
<script src='../../../vendor/fullcalendar-2.1.1/lib/moment.min.js'></script>
<link rel="stylesheet" href="../../../vendor/fullcalendar-2.1.1/fullcalendar.min.css">
<script src='../../../vendor/fullcalendar-2.1.1/fullcalendar.min.js'></script>

<!-- Underscore -->
<script src= "../../../vendor/underscore/underscore.min.js"></script>

<!-- Angular -->
<script src= "../../../vendor/angular/angular.min.js"></script>
<script src= "../../../vendor/angular-resource/angular-resource.min.js"></script>
<script src= "../../../vendor/angular-route/angular-route.min.js"></script>
<script src= "../../../vendor/angular-bootstrap/ui-bootstrap.min.js"></script>
<script src= "../../../vendor/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
<script src= '../../../vendor/ng-grid/ng-grid-2.0.12.min.js'></script>
<script src= '../../../vendor/ui-bootstrap-custom-tpls-0.10.0.min.js'></script>
<link rel="stylesheet" href="../../../css/main.css">

<!-- ctrl -->
<script src="../../../js/history-core.js"></script>
<script src="../../../js/configs/routes-history.js"></script>
<script src="../../../js/controllers/list-history.js"></script>
<script src="../../../js/controllers/listApproved-history.js"></script>
<script src="../../../js/controllers/listInWork-history.js"></script>
<script src="../../../js/controllers/listNotReviewed-history.js"></script>
<script src="../../../js/controllers/listOutdated-history.js"></script>

<% var route = path.split('/')[1]%>
<% if(route === 'cis') { %>
  <script src='../../../js/factories/CIS/History.js'></script>
<% } else if(route ==='eu') { %>
  <script src='../../../js/factories/EU/History.js'></script>
<% } else if (route ==='sia'){ %>
  <script src='../../../js/factories/SIA/History.js'></script>
<% } else if (route === "global"){ %>
  <script src='../../../js/factories/Sandbox/History.js'></script>
<% }%>


<style>
  h2.title {
    text-align: center;
  }

  #ppdatepicker {
    visibility:hidden; 
    width:1px;
    position:absolute;
    top:5px;
  }
</style>

<script>
  $(document).ready(function () {
    $("#ppdatepicker").datepicker({
      onSelect: function(dateText, inst){
        var date = new Date(dateText);
        var day = date.getDate();
        var month = date.getMonth()+1;
        var year = date.getFullYear();
        var xx = month+ "-"+ day + "-" +year;
        var currentLoc = window.location.pathname;
        var tempArray= currentLoc.split("/");
        tempArray[3] = xx;
        window.location.pathname = tempArray.join("/");
      }
    });
    $('#pdatepicker').click(function(){
      $('#ppdatepicker').datepicker("show");
    });
  });
</script>
<script>
  var tryCount = 0;
 
  function checkReady() {
    if($("#datepicker-notice").is(":visible")) {
      $("#datepicker-notice").datepicker({
        onSelect: function(dateText, inst){
          var date = new Date(dateText);
          var day = date.getDate();
          var month = date.getMonth()+1;
          var year = date.getFullYear();
          var xx = month+ "-"+ day + "-" +year;
          var currentLoc = window.location.pathname;
          var tempArray= currentLoc.split("/");
          tempArray[3] = xx;
          window.location.pathname = tempArray.join("/");
        }
      });
    } else if(tryCount>10) {
      console.log("timeout limit");
      return;
    }else {
      tryCount++;
      setTimeout(checkReady, 500);
      console.log("element not found.... Try again...");
    }
  }

  $(document).ready(function(){
    console.log("start");
    checkReady();
  });
</script>