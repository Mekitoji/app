<!DOCTYPE html>
<html ng-app="sdpSubscribe">
  <head>
    <meta charset="utf-8">
    <title>Subscribe sbc member</title>
    <link rel="stylesheet" href="../vendor/bootstrap/dist/css/bootstrap.min.css">
    <style>
      #addNewSubscribe {
        margin-bottom: 15px;
      }
    </style>
    <!-- Jquery -->
    <script src= "../vendor/jquery/dist/jquery.min.js"></script>
    <script src= "../vendor/jquery/jquery-ui-1.11.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="../vendor/jquery/jquery-ui-1.11.1/jquery-ui.min.css">
    <script src='../js/mindmup-editabletable.js'></script>
    <!-- Bootstrap -->
    <script src= "../vendor/bootstrap/dist/js/bootstrap.min.js"></script>

    <script src= "../vendor/angular/angular.min.js"></script>

    <script src="../js/sdpSubscribe.js"></script>
  </head>
  <body>
    <% include layout/profile_header %>

    <div class="container" ng-controller="subscribe">
      <input id="addNewSubscribe" data-toggle="modal" data-target="#addSubModal" type="button" class="btn btn-default" value="Add new application">
      <table class="table table-hover">
        <tr>
          <th>Application Id</th>
          <th>Application Name</th>
          <th>Subscribers</th>
        </tr>
        <tr ng-repeat="app in watching">
          <td>{{app.id}}</td>
          <td>{{app.status}}</td>
          <td>{{app.region}}</td>
        </tr>
      </table>
      <div class="modal fade" role="dialog" id="addSubModal">
        <div class="modal-dialog modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Add new application</h4>
          </div>
          <form class="modal-body" ng-submit='submit()'>
            <div class="form-group">
              <label for="appName">Application name</label>
              <select name="appName" id="appName">
                <option ng-repeat="data in notWatching track by $index" value="{{data._id}}">
                  {{data.status}} {{data.id}}
                </option>
              </select>
            </div>
            <div class="form-group">
              <label for="subName">Subscriber</label>
              <select name="subName" id="subName" ng-model="newSub">
                <option ng-repeat="subscriber in subscribers track by $index" value="{{subscriber.name}}">{{subscriber.name}}</option>
              </select>
              <input type="button" class="btn btn-default" value="Add" ng-click="addSubscribe(newSub)">
            </div>
            <div class="form-group">
              <label for="subscriber" >Subscribers</label>
              <textarea cols="75" rows="3" readonly>{{subList.toString()}}</textarea>
            </div>
            <div class="modal-footer">
              <input type="submit"  class='btn btn-default'>
              <input type="button" class="btn btn-default" data-dismiss="modal" value="Close">
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
